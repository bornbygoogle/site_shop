@using MudBlazor;
@using BlazorApp.Shared;

@inject HttpClient Http
@inject NavigationManager NavigationManager

@page "/shopsingle"

<PageTitle>@pageTitle</PageTitle>

<!-- Open Content -->
<section class="bg-light">
    <div class="container pb-5">
        <div class="row">
            <div class="col-lg-5 mt-5">
                <div class="card mb-3">
                    <img class="card-img img-fluid" src="assets/img/product_single_10.jpg" alt="Card image cap" id="product-detail">
                </div>
                <BlazorSlickCarousel @ref="shopSingleCarousel" Configurations="shopSingleConfigurations" Id="multi-item-example">
                    <BlazorSlickCarouselContent>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_01.jpg" alt="Product Image 1">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_02.jpg" alt="Product Image 2">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_03.jpg" alt="Product Image 3">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_04.jpg" alt="Product Image 4">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_05.jpg" alt="Product Image 5">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_06.jpg" alt="Product Image 6">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_07.jpg" alt="Product Image 7">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_08.jpg" alt="Product Image 8">
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="/shopsingle">
                                <img class="card-img img-fluid" src="assets/img/product_single_09.jpg" alt="Product Image 9">
                            </a>
                        </div>
                    </BlazorSlickCarouselContent>
                    <BlazorSlickCarouselLoading></BlazorSlickCarouselLoading>
                </BlazorSlickCarousel>
            </div>
            <!-- col end -->
            <div class="col-lg-7 mt-5">
                <div class="card">
                    <div class="card-body">
                        <h1 class="h2">Active Wear</h1>
                        <p class="h3 py-2">$25.00</p>
                        <p class="py-2">
                            <i class="fa fa-star text-warning"></i>
                            <i class="fa fa-star text-warning"></i>
                            <i class="fa fa-star text-warning"></i>
                            <i class="fa fa-star text-warning"></i>
                            <i class="fa fa-star text-secondary"></i>
                            <span class="list-inline-item text-dark">Rating 4.8 | 36 Comments</span>
                        </p>
                        <ul class="list-inline">
                            <li class="list-inline-item">
                                <h6>Brand:</h6>
                            </li>
                            <li class="list-inline-item">
                                <p class="text-muted"><strong>Easy Wear</strong></p>
                            </li>
                        </ul>

                        <h6>Description:</h6>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod temp incididunt ut labore et dolore magna aliqua. Quis ipsum suspendisse. Donec condimentum elementum convallis. Nunc sed orci a diam ultrices aliquet interdum quis nulla.</p>
                        <ul class="list-inline">
                            <li class="list-inline-item">
                                <h6>Avaliable Color :</h6>
                            </li>
                            <li class="list-inline-item">
                                <p class="text-muted"><strong>White / Black</strong></p>
                            </li>
                        </ul>

                        <h6>Specification:</h6>
                        <ul class="list-unstyled pb-3">
                            <li>Lorem ipsum dolor sit</li>
                            <li>Amet, consectetur</li>
                            <li>Adipiscing elit,set</li>
                            <li>Duis aute irure</li>
                            <li>Ut enim ad minim</li>
                            <li>Dolore magna aliqua</li>
                            <li>Excepteur sint</li>
                        </ul>

                        <form action="" method="GET">
                            <input type="hidden" name="product-title" value="Activewear">
                            <div class="row">
                                <div class="col-auto">
                                    <ul class="list-inline pb-3">
                                        <li class="list-inline-item">
                                            Size :
                                            <input type="hidden" name="product-size" id="product-size" value="S">
                                        </li>
                                        <li class="list-inline-item"><span class="btn btn-success btn-size">S</span></li>
                                        <li class="list-inline-item"><span class="btn btn-success btn-size">M</span></li>
                                        <li class="list-inline-item"><span class="btn btn-success btn-size">L</span></li>
                                        <li class="list-inline-item"><span class="btn btn-success btn-size">XL</span></li>
                                    </ul>
                                </div>
                                <div class="col-auto">
                                    <ul class="list-inline pb-3">
                                        <li class="list-inline-item text-right">
                                            Quantity
                                            <input type="hidden" name="product-quanity" id="product-quanity" value="1">
                                        </li>
                                        <li class="list-inline-item"><span class="btn btn-success" id="btn-minus">-</span></li>
                                        <li class="list-inline-item"><span class="badge bg-secondary" id="var-value">1</span></li>
                                        <li class="list-inline-item"><span class="btn btn-success" id="btn-plus">+</span></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="row pb-3">
                                <div class="col d-grid">
                                    <button type="submit" class="btn btn-success btn-lg" name="submit" value="buy">Buy</button>
                                </div>
                                <div class="col d-grid">
                                    <button type="submit" class="btn btn-success btn-lg" name="submit" value="addtocard">Add To Cart</button>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Close Content -->

<RelatedProducts></RelatedProducts>

@code {
    public BlazorSlickCarousel? shopSingleCarousel;
    public WMBSCInitialSettings? shopSingleConfigurations;

    [CascadingParameter(Name = "DataSwanShop")]
    protected SwanShop? data { get; set; }

    private string pageTitle = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        //data = await Http.GetFromJsonAsync<SwanShop>($"/api/GetData");
    }

    protected override void OnParametersSet()
    {
        if (data != null && data.Configs != null && data.Configs.Count > 0)
        {
            var currentUrl = NavigationManager.Uri.Replace(NavigationManager.BaseUri, string.Empty).ToLower();
            var indexConfigs = data.Configs.Where(x => !string.IsNullOrEmpty(x.Route) && x.Route.ToLower() == currentUrl);
            if (indexConfigs.Count() > 0)
            {
                foreach (var item in indexConfigs)
                {
                    if (item.Properties != null && item.Properties.Count > 0)
                    {
                        var configPageTitle = item.Properties.Where(x => x.Name == nameof(PageTitle)).FirstOrDefault();
                        if (configPageTitle != null)
                            pageTitle = configPageTitle.Value;
                    }
                }
            }
        }

    }

    protected override void OnInitialized()
    {
        // to <= 800px screen
        WMBSCSettings breakpoint800Settings = new WMBSCSettings
            {
                slidesToShow = 2,
                arrows = false,
                dots = false
            };
        WMBSCResponsiveSettings breakpoint800Responsive = new WMBSCResponsiveSettings
            {
                breakpoint = 800,
                settings = breakpoint800Settings
            };

        // to <= 400px screen
        WMBSCSettings breakpoint400Settings = new WMBSCSettings
            {
                slidesToShow = 1,
                arrows = false
            };
        WMBSCResponsiveSettings breakpoint400Responsive = new WMBSCResponsiveSettings
            {
                breakpoint = 400,
                settings = breakpoint400Settings
            };

        // add responsivity
        List<WMBSCResponsiveSettings> responsiveSettingsList = new List<WMBSCResponsiveSettings>();
        responsiveSettingsList.Add(breakpoint800Responsive);
        responsiveSettingsList.Add(breakpoint400Responsive);

        // the carousel configurations
        shopSingleConfigurations = new WMBSCInitialSettings
            {
                arrows = false,
                dots = false,
                slidesToShow = 3,
                slidesToScroll = 3,
                infinite = true,
                responsive = responsiveSettingsList,
                centerMode = true,
                adaptiveHeight = true,
                autoplay = true,
                autoplaySpeed = 200,
                touchMove = false
            };
    }
}
